######################################################################
#                                                                    #
#                 Universitätsbibliographie online                   #
#                                                                    #
######################################################################

# Include other configuration files
MCR.Configuration.Include=local.properties

# local.property: Base directory of installation
UBO.BaseDir=/mcr/miless.production/data/

######################################################################
#                                                                    #
#                             Database                               #
#                                                                    #
######################################################################

# local.property: JDBC driver and database URL for MySQL connections
MCR.Persistence.SQL.Database.Type=mysql
MCR.Persistence.SQL.Driver=org.gjt.mm.mysql.Driver
MCR.Persistence.SQL.Database.URL=jdbc:mysql://localhost/ubo
MCR.Persistence.SQL.Database.Userid=ubo
MCR.Persistence.SQL.Database.Passwd=ubo

# local.property: Initial and maximum number of JDBC connections 
MCR.Persistence.SQL.Connections.Init=6
MCR.Persistence.SQL.Connections.Max=6

# After many usages of SQL connection, destroy and recreate connection:
MCR.Persistence.SQL.Database.Connections.MaxUsages=500

######################################################################
#                                                                    #
#                            Metadata Store                          #
#                                                                    #
######################################################################

# Define a store for the entries
MCR.IFS2.Store.ubo.Class=org.mycore.datamodel.ifs2.MCRMetadataStore
# local.property: base directory for dozbib data
MCR.IFS2.Store.ubo.BaseDir=%UBO.BaseDir%ubo-data
MCR.IFS2.Store.ubo.SlotLayout=4-2-2

MCR.Metadata.ObjectID.InitialNumberDistance=10
MCR.Metadata.ObjectID.NumberDistance=1
MCR.Metadata.ObjectID.NumberPattern=00000000

MCR.Metadata.Store.DefaultClass=org.mycore.datamodel.ifs2.MCRMetadataStore 
MCR.Metadata.Store.BaseDir=%UBO.BaseDir%metadata
MCR.Metadata.Store.SVNBase=file\:///%UBO.BaseDir%versions

# Format of dates within Document, see MCRMODSDateHelper for valid formats
UBO.MODS.DateFormat=w3cdtf-10

# Switch to true to enable XML Schema validation in parser 
MCR.XMLParser.ValidateSchema=false

# Set the condition for reading date values.  
MCR.Metadata.SimpleDateFormat.StrictParsing=false

######################################################################
#                                                                    #
#                                 SOLR                               #
#                                                                    #
######################################################################

MCR.Module-solr.ServerURL=http://127.0.0.1:8983/ubo
MCR.Module-solr.DynamicFields=false

MCR.URIResolver.xslImports.solr-document=solr-basetemplate.xsl,ubo-solr.xsl

MCR.EventHandler.MCRObject.018.Class=unidue.ubo.dedup.DeDupEventHandler
MCR.EventHandler.MCRObject.030.Class=
MCR.EventHandler.MCRObject.040.Class=
MCR.EventHandler.MCRObject.070.Class=
MCR.EventHandler.MCRObject.100.Class=org.mycore.solr.index.MCRSolrIndexEventHandler

######################################################################
#                                                                    #
#                         Legacy Search Fields                       #
#                                                                    #
######################################################################

# Legacy lucene field names were different, map to SOLR field
UBO.LegacySearch.Field.ubo_publisher=person_edt
UBO.LegacySearch.Field.ubo_referee=person_rev
UBO.LegacySearch.Field.ubo_advisor=person_ths
UBO.LegacySearch.Field.ubo_author=person_aut
UBO.LegacySearch.Field.ubo_contributor=person
UBO.LegacySearch.Field.ubo_diss_year=year_diss
UBO.LegacySearch.Field.ubo_role_pid=role_lsf
UBO.LegacySearch.Field.ubo_documentID=id_duepublico
UBO.LegacySearch.Field.ubo_scopus_pub=id_scopus
UBO.LegacySearch.Field.ubo_pubmed=id_pubmed
UBO.LegacySearch.Field.ubo_urn=id_urn
UBO.LegacySearch.Field.ubo_doi=id_doi
UBO.LegacySearch.Field.ubo_signature=sheflmark
UBO.LegacySearch.Field.ubo_issn=id_issn
UBO.LegacySearch.Field.ubo_isbn=id_isbn
UBO.LegacySearch.Field.ubo_comment=note
UBO.LegacySearch.Field.ubo_gnd=nid_gnd
UBO.LegacySearch.Field.ubo_scopus_pers=nid_scopus
UBO.LegacySearch.Field.ubo_researcherid=nid_researcherid
UBO.LegacySearch.Field.ubo_orcid=nid_orcid
UBO.LegacySearch.Field.ubo_pid=nid_lsf
UBO.LegacySearch.Field.ubo_type=genre
UBO.LegacySearch.Field.ubo_lastModified=modified

# Sort field names have changed over time
UBO.LegacySearch.Sort.ubo_name=sortby_person
UBO.LegacySearch.Sort.ubo_title=sortby_title
UBO.LegacySearch.Sort.ubo_year=year
UBO.LegacySearch.Sort.ubo_type=genre

UBO.LegacySearch.DefaultOperator.ubo_journal=contains
UBO.LegacySearch.DefaultOperator.ubo_series=contains
UBO.LegacySearch.DefaultOperator.ubo_conference=contains
UBO.LegacySearch.DefaultOperator.ubo_comment=contains
UBO.LegacySearch.DefaultOperator.ubo_abstract=contains
UBO.LegacySearch.DefaultOperator.ubo_all=contains
UBO.LegacySearch.DefaultOperator.ubo_title=contains
UBO.LegacySearch.DefaultOperator.ubo_contributor=contains
UBO.LegacySearch.DefaultOperator.ubo_author=phrase
UBO.LegacySearch.DefaultOperator.ubo_advisor=phrase
UBO.LegacySearch.DefaultOperator.ubo_referee=phrase
UBO.LegacySearch.DefaultOperator.ubo_publisher=phrase

UBO.LegacySearch.DefaultOperator.journal=contains
UBO.LegacySearch.DefaultOperator.series=contains
UBO.LegacySearch.DefaultOperator.conference=contains
UBO.LegacySearch.DefaultOperator.note=contains
UBO.LegacySearch.DefaultOperator.abstract=contains
UBO.LegacySearch.DefaultOperator.all=contains
UBO.LegacySearch.DefaultOperator.title=contains
UBO.LegacySearch.DefaultOperator.person=phrase
UBO.LegacySearch.DefaultOperator.person_aut=phrase
UBO.LegacySearch.DefaultOperator.person_ths=phrase
UBO.LegacySearch.DefaultOperator.person_rev=phrase
UBO.LegacySearch.DefaultOperator.person_edt=phrase

######################################################################
#                                                                    #
#                           Users and ACLs                           #
#                                                                    #
######################################################################

# Disable setting current groups in MyCoRe LayoutService
MCR.Users.SetCurrentGroups=true

# User and group ID of guest user in MyCoRe system
MCR.Users.Guestuser.UserName=gast
MCR.Users.Guestuser.GroupName=gast

# MyCoRe ACL configuration
MCR.Access.Strategy.Class=org.mycore.access.strategies.MCRObjectTypeStrategy

######################################################################
#                                                                    #
#                        Command Line Interface                      #
#                                                                    #
######################################################################

# MyCoRe command line interface configuration
MCR.CLI.Classes.Internal.DozBib=unidue.ubo.DozBibCommands

# MyCoRe command line interface configuration
MCR.CommandLineInterface.SystemName=UBO

######################################################################
#                                                                    #
#                               E-Mail                               #
#                                                                    #
######################################################################

# Default "from" address
MCR.Mail.Address=universitaetsbibliographie@ub.uni-due.de

# CHANGE: Hostname of the outgoing SMTP mail server
MCR.Mail.Server=mailout.uni-due.de
MCR.Mail.Protocol=smtp
MCR.Mail.Debug=false

# If you set this to 0, no email is sended anywhere
MCR.Mail.NumTries=10

######################################################################
#                                                                    #
#                            Web Interface                           #
#                                                                    #
######################################################################

# local.property: Base URL of the web application
MCR.baseurl=http://localhost:8080

# IP address of trusted proxy
MCR.Request.TrustedProxies=132.252.181.145,132.252.180.145

# If set to true, editing metadata and content over the web is disabled
UBO.System.ReadOnly=false

# Show a maintainance message if UBO.System.ReadOnly=true
UBO.System.ReadOnly.Message=Aufgrund von Wartungsarbeiten ist das Erstellen oder Bearbeiten von Einträgen zurzeit gesperrt.

# Classification that contains all languages with codes and labels
MCR.LanguageClassification=rfc4646

# Caching Resolver
MCR.URIResolver.ModuleResolver.cache=unidue.ubo.CachingResolver
UBO.CachingResolver.Capacity=100
UBO.CachingResolver.MaxAge=86400000

# Sorting rules for MCRURIResolver
MCR.URIResolver.Classification.Sort.ORIGIN=false
MCR.URIResolver.Classification.Sort.rfc4646=true
MCR.URIResolver.Classification.Sort.marcrelator=false

# XML document types that contain editor framework forms
MCR.EditorFramework.DocTypes=webpage

# URI resolver
MCR.URIResolver.ModuleResolver.nameLister=unidue.ubo.basket.BasketNameLister

######################################################################
#                                                                    #
#                           Uploading files                          #
#                                                                    #
######################################################################

# local.property: Directory for temporary storage of uploaded files
MCR.Editor.FileUpload.TempStoragePath=%UBO.BaseDir%uploads

# Maximum file size for HTML form based uploads, here 25 MB
MCR.Editor.FileUpload.MaxSize=26214400

# Files smaller than this number of bytes will be kept in memory
MCR.Editor.FileUpload.MemoryThreshold=500000

######################################################################
#                                                                    #
#                       Google Sitemap Configuration                 #
#                                                                    #
######################################################################

MCR.WebApplication.basedir=%MCR.datadir%
MCR.GoogleSitemap.Types=mods

######################################################################
#                                                                    #
#                              Statistics                            #
#                                                                    #
######################################################################

MCR.ContentTransformer.statistics.Class=org.mycore.common.content.transformer.MCRXSLTransformer
MCR.ContentTransformer.statistics.Stylesheet=xsl/response-statistics.xsl,xsl/ubostatistics.xsl

######################################################################
#                                                                    #
#                                Export                              #
#                                                                    #
######################################################################

# Export bibliography entries in legacy, bibentry XML format.
MCR.ContentTransformer.xml.Class=org.mycore.common.content.transformer.MCRXSLTransformer
MCR.ContentTransformer.xml.Stylesheet=xsl/exportCollection-resolveBasketEntry.xsl,xsl/response-export.xsl,xsl/export-legacy.xsl
MCR.ContentTransformer.xml.MIMEType=text/xml
MCR.ContentTransformer.xml.FileExtension=xml

# Export bibliography entries as HTML, using export-html.xsl
MCR.ContentTransformer.html.Class=org.mycore.common.content.transformer.MCRXSLTransformer
MCR.ContentTransformer.html.Stylesheet=xsl/exportCollection-resolveBasketEntry.xsl,xsl/response-export.xsl,xsl/export-html.xsl
MCR.ContentTransformer.html.MIMEType=text/html
MCR.ContentTransformer.html.FileExtension=html

# Export bibliography entries as PDF, using export-pdf.xsl
# First produce XSL-FO, then make PDF out of it
MCR.ContentTransformer.fo.Class=org.mycore.common.content.transformer.MCRXSLTransformer
MCR.ContentTransformer.fo.Stylesheet=xsl/exportCollection-resolveBasketEntry.xsl,xsl/response-export.xsl,xsl/export-pdf.xsl
MCR.ContentTransformer.fo2pdf.Class=org.mycore.common.content.transformer.MCRFopper
MCR.ContentTransformer.pdf.Class=org.mycore.common.content.transformer.MCRTransformerPipe
MCR.ContentTransformer.pdf.Steps=fo, fo2pdf
MCR.ContentTransformer.pdf.FileExtension=pdf

# Debugging of transformation steps (example)
MCR.ContentTransformer.debug.Class=org.mycore.common.content.transformer.MCRDebuggingTransformer
MCR.ContentTransformer.debug-pdf.Class=org.mycore.common.content.transformer.MCRTransformerPipe
MCR.ContentTransformer.debug-pdf.Steps=debug, fo, debug, fo2pdf, debug

# Export bibliography entries as MODS, using export-mods.xsl
MCR.ContentTransformer.mods.Class=org.mycore.common.content.transformer.MCRXSLTransformer
MCR.ContentTransformer.mods.Stylesheet=xsl/exportCollection-resolveBasketEntry.xsl,xsl/response-export.xsl,xsl/export-mods.xsl
MCR.ContentTransformer.mods.MIMEType=text/xml
MCR.ContentTransformer.mods.FileExtension=xml

# Export bibliography entries as MODS for BibTeX, using export-mods and mods2bibmods.xsl
MCR.ContentTransformer.mods2bibmods.Class=org.mycore.common.content.transformer.MCRXSLTransformer
MCR.ContentTransformer.mods2bibmods.Stylesheet=xsl/exportCollection-resolveBasketEntry.xsl,xsl/response-export.xsl,xsl/export-mods.xsl,xsl/mods2bibmods.xsl
MCR.ContentTransformer.mods2bibmods.MIMEType=text/xml
MCR.ContentTransformer.mods2bibmods.FileExtension=xml

# local.property: Export bibliography entries by use of the Bibutils commands.
# See http://www.scripps.edu/~cdputnam/software/bibutils/
UBO.BibUtils.Base=cmd.exe /c C\:\\Java\\bibutils_4.12\\

# Export bibliography entries as BibTeX file
# First produce MODS, then make BibTeX out of it
MCR.ContentTransformer.mods2bibtex.Class=org.mycore.common.content.transformer.MCRBibUtilsTransformer
# local.property: system command for xml2bib
MCR.ContentTransformer.mods2bibtex.Command=%UBO.BibUtils.Base%xml2bib.exe -b -w -o UTF8
MCR.ContentTransformer.mods2bibtex.MIMEType=text/plain; charset\="UTF-8"
MCR.ContentTransformer.mods2bibtex.FileExtension=bib
MCR.ContentTransformer.bibtex.Class=org.mycore.common.content.transformer.MCRTransformerPipe
MCR.ContentTransformer.bibtex.Steps=mods2bibmods, mods2bibtex
MCR.ContentTransformer.bibtex.FileExtension=bib

# Export bibliography entries as RIS (Reference Manager) format
# First produce MODS, then make RIS out of it
MCR.ContentTransformer.mods2ris.Class=org.mycore.common.content.transformer.MCRBibUtilsTransformer
# local.property: system command for xml2ris
MCR.ContentTransformer.mods2ris.Command=%UBO.BibUtils.Base%xml2ris.exe
MCR.ContentTransformer.mods2ris.MIMEType=text/plain; charset\="latin1"
MCR.ContentTransformer.mods2ris.FileExtension=ris
MCR.ContentTransformer.ris.Class=org.mycore.common.content.transformer.MCRTransformerPipe
MCR.ContentTransformer.ris.Steps=mods2bibmods, mods2ris
MCR.ContentTransformer.ris.FileExtension=ris

# Export bibliography entries as EndNote tagged file format
# First produce MODS, then make EndNote out of it
MCR.ContentTransformer.mods2endnote.Class=org.mycore.common.content.transformer.MCRBibUtilsTransformer
# local.property: system command for xml2end
MCR.ContentTransformer.mods2endnote.Command=%UBO.BibUtils.Base%xml2end.exe
MCR.ContentTransformer.mods2endnote.MIMEType=text/plain; charset\="latin1"
MCR.ContentTransformer.mods2endnote.FileExtension=enw
MCR.ContentTransformer.endnote.Class=org.mycore.common.content.transformer.MCRTransformerPipe
MCR.ContentTransformer.endnote.Steps=mods2bibmods, mods2endnote
MCR.ContentTransformer.endnote.FileExtension=enw

######################################################################
#                                                                    #
#                           BibTeX Import                            #
#                                                                    #
######################################################################

# Import bibliography entries from BibTeX
MCR.ContentTransformer.import.BibTeX.Class=org.mycore.common.content.transformer.MCRTransformerPipe
MCR.ContentTransformer.import.BibTeX.Steps=import.BibTeX2MODS,import.MODS2MCRObj
MCR.ContentTransformer.import.BibTeX2MODS.Class=unidue.ubo.importer.bibtex.BibTeX2MODSTransformer
MCR.ContentTransformer.import.MODS2MCRObj.Class=org.mycore.common.content.transformer.MCRXSLTransformer
MCR.ContentTransformer.import.MODS2MCRObj.Stylesheet=xsl/import-mods2mycoreobject.xsl

######################################################################
#                                                                    #
#             OAI-PMH 2.0 Data Provider Configuration                #
#                                                                    #
######################################################################

MCR.OAIDataProvider.MetadataFormat.oai_dc.Schema=http://www.openarchives.org/OAI/2.0/oai_dc.xsd
MCR.OAIDataProvider.MetadataFormat.oai_dc.Namespace=http://www.openarchives.org/OAI/2.0/oai_dc/

MCR.OAIDataProvider.MetadataFormat.oai_qdc.Namespace=http://epubs.cclrc.ac.uk/xmlns/qdc/
MCR.OAIDataProvider.MetadataFormat.oai_qdc.Schema=http://epubs.cclrc.ac.uk/xsd/qdc.xsd
 	
MCR.OAIDataProvider.MetadataFormat.mods.Namespace=http://www.loc.gov/mods/v3
MCR.OAIDataProvider.MetadataFormat.mods.Schema=http://www.loc.gov/standards/mods/v3/mods-3-6.xsd
 	
MCR.OAIDataProvider.ResumptionTokens.PartitionSize=100
MCR.OAIDataProvider.ResumptionTokens.MaxAge=1440

MCR.OAIDataProvider.OAI.RepositoryName=Universit\u00e4tsbibliographie, Universit\u00e4t Duisburg-Essen
MCR.OAIDataProvider.OAI.RepositoryIdentifier=ubo
MCR.OAIDataProvider.OAI.AdminEmail=%MCR.Mail.Address%
MCR.OAIDataProvider.OAI.RecordSampleID=ubo_mods_00000001

MCR.OAIDataProvider.OAI.DeletedRecord=transient
MCR.OAIDataProvider.OAI.ResponseStylesheet=oai/oai2.xsl

MCR.OAIDataProvider.OAI.Adapter.RecordURIPattern=xslStyle\:mycoreobject2{format}\:mcrobject\:{id}
MCR.OAIDataProvider.OAI.Adapter.HeaderURIPattern=xslStyle\:mycoreobject2header\:mcrobject\:{id}

MCR.OAIDataProvider.OAI.Search.FromUntil=modified
MCR.OAIDataProvider.OAI.Search.SortBy=modified desc, id desc
MCR.OAIDataProvider.OAI.Search.Restriction=status\:confirmed 

MCR.OAIDataProvider.OAI.EarliestDatestamp.SortBy=modified asc

MCR.OAIDataProvider.OAI.MetadataFormats=oai_dc,oai_qdc,mods 

######################################################################
#                                                                    #
#                              HIS LSF                               #
#                                                                    #
######################################################################

UBO.LSF.Link=https://www.uni-due.de/zim/services/suchdienste/mitarbeiter.php?id=

MCR.URIResolver.ModuleResolver.lsf=unidue.ubo.lsf.LSFResolver
UBO.LSFClient.Cache.MaxAge=3600000
UBO.LSFClient.Cache.Capacity=1000

######################################################################
#                                                                    #
#                           EVALuna Biblio                           #
#                                                                    #
######################################################################

UBO.Evaluna.URL=http\://e-med.biblio.evaluna.net/perl-bin/biblio.pl

MCR.ContentTransformer.import.Evaluna.Class=org.mycore.common.content.transformer.MCRXSLTransformer
MCR.ContentTransformer.import.Evaluna.Stylesheet=xsl/evaluna2mods.xsl,xsl/import-mods2mycoreobject.xsl

MCR.URIResolver.ModuleResolver.evaluna=unidue.ubo.importer.evaluna.EvalunaResolver

######################################################################
#                                                                    #
#                               PubMed                               #
#                                                                    #
######################################################################

UBO.PubMed.Link=http://www.ncbi.nlm.nih.gov/pubmed/
UBO.PubMed.REST.URL=http://www.ebi.ac.uk/europepmc/webservices/rest/search/resulttype=core&query=

# Configuration for importing PubMed RSS feed
UBO.RSSFeedImporter.PubMed.FeedURL=https://eutils.ncbi.nlm.nih.gov/entrez/eutils/erss.cgi?rss_guid=1LgINZmdEb7dTjgV40Ro8AN9MSFRAFarM7cb16kssgU3LD2Afd
UBO.RSSFeedImporter.PubMed.PublicationURI=xslStyle:pubmed2mods,mods2mycoreobject:%UBO.PubMed.REST.URL%ext_id:{0}
UBO.RSSFeedImporter.PubMed.Pattern2FindID=.+pubmed/(\\d+)\\?.+
UBO.RSSFeedImporter.PubMed.Field2QueryID=id_pubmed

######################################################################
#                                                                    #
#                               Scopus                               #
#                                                                    #
######################################################################

UBO.Scopus.Author.Link=http://www.scopus.com/authid/detail.url?partnerID=HzOxMe3b&origin=inward&authorId=
UBO.Scopus.Link=http://www.scopus.com/inward/record.url?partnerID=HzOxMe3b&origin=inward&scp=
UBO.Scopus.API.URL=http://api.elsevier.com/content/
# UBO.Scopus.API.Key= --> see local.properties

# Configuration for importing Scopus RSS feed
UBO.RSSFeedImporter.Scopus.FeedURL=https://syndic8.scopus.com/getMessage?registrationId=BHFEBIFFIJFNFHHHDHGKBNHMBKIGBNIFKKMFDIMJFW
UBO.RSSFeedImporter.Scopus.PublicationURI=xslStyle:scopus2mods,mods2mycoreobject:%UBO.Scopus.API.URL%abstract/scopus_id/{0}?apikey=%UBO.Scopus.API.Key%
UBO.RSSFeedImporter.Scopus.Pattern2FindID=.+eid%3D2-s2\\.0-(\\d+)%26.+
UBO.RSSFeedImporter.Scopus.Field2QueryID=id_scopus

######################################################################
#                                                                    #
#                           Web of Science                           #
#                                                                    #
######################################################################

UBO.WebOfScience.Link=http://ws.isiknowledge.com/cps/openurl/service?url_ver=Z39.88-2004&rft_id=info:ut/

######################################################################
#                                                                    #
#                           MODS Merging                             #
#                                                                    #
######################################################################

UBO.MODSMerger.titleInfo=unidue.ubo.merger.TitleInfoMerger
UBO.MODSMerger.name=unidue.ubo.merger.NameMerger
UBO.MODSMerger.namePart=unidue.ubo.merger.UniqueTypeMerger
UBO.MODSMerger.displayForm=unidue.ubo.merger.UniqueMerger
UBO.MODSMerger.originInfo=unidue.ubo.merger.UniqueMerger
UBO.MODSMerger.edition=unidue.ubo.merger.UniqueMerger
UBO.MODSMerger.place=unidue.ubo.merger.UniqueMerger
UBO.MODSMerger.publisher=unidue.ubo.merger.UniqueMerger
UBO.MODSMerger.dateIssued=unidue.ubo.merger.UniqueMerger
UBO.MODSMerger.dateModified=unidue.ubo.merger.UniqueMerger
UBO.MODSMerger.dateCreated=unidue.ubo.merger.UniqueMerger
UBO.MODSMerger.dateOther=unidue.ubo.merger.UniqueTypeMerger
UBO.MODSMerger.issuance=unidue.ubo.merger.UniqueMerger
UBO.MODSMerger.frequency=unidue.ubo.merger.UniqueMerger
UBO.MODSMerger.location=unidue.ubo.merger.UniqueMerger
UBO.MODSMerger.physicalDescription=unidue.ubo.merger.UniqueMerger
UBO.MODSMerger.part=unidue.ubo.merger.UniqueMerger
UBO.MODSMerger.detail=unidue.ubo.merger.UniqueTypeMerger
UBO.MODSMerger.extent=unidue.ubo.merger.ExtentMerger
UBO.MODSMerger.identifier=unidue.ubo.merger.IdentifierMerger
UBO.MODSMerger.abstract=unidue.ubo.merger.AbstractMerger
UBO.MODSMerger.relatedItem=unidue.ubo.merger.RelatedItemMerger
UBO.MODSMerger.default=unidue.ubo.merger.Merger
