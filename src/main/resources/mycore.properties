######################################################################
#                                                                    #
# This is the main configuration file.                               #
#                                                                    #
######################################################################

# Include other properties
MCR.Configuration.Include=log4j.properties,local.properties

# local.property: Base directory of installation
MIL.BaseDir=/mcr/miless.production/data/

# local.property: Scheme that of the web application
MIL.scheme=http

# local.property: DNS of the application
MIL.dns=localhost

# local.property: Port of the application
MIL.port=8080

# local.property: Base URL of the web application
MCR.baseurl=%MIL.scheme%://%MIL.dns%:%MIL.port%/

######################################################################
#                                                                    #
#  Configuration to store document metadata as MCRObject with MODS   #
#                                                                    #
######################################################################

MCR.Metadata.ObjectID.InitialNumberDistance=10
MCR.Metadata.ObjectID.NumberDistance=1
MCR.Metadata.ObjectID.NumberPattern=00000000

MCR.Metadata.Store.DefaultClass=org.mycore.datamodel.ifs2.MCRMetadataStore 
MCR.Metadata.Store.BaseDir=%MIL.BaseDir%metadata
MCR.Metadata.Store.SVNBase=file\:///%MIL.BaseDir%versions

# Tell the EventManager how to instantiate indexers (which are also event handlers)
MCR.EventHandler.Mode.Indexer=org.mycore.services.fieldquery.MCRIndexerEventHandlerInitializer

# Set the searcher adapter to lucene implementation
MCR.Module-classbrowser.QueryAdapter=org.mycore.services.fieldquery.MCRSearcherQueryAdapter
MCR.MCRQueryHostParser.Impl=org.mycore.services.webservices.MCRWSQueryHostParser

# Delete some default properties used by SOLR
MCR.EventHandler.MCRObject.100.Class=
MCR.EventHandler.MCRDerivate.100.Class=
MCR.EventHandler.MCRPath.100.Class=

MCR.Searcher.lucene-metadata.Class=org.mycore.backend.lucene.MCRLuceneSearcher
MCR.Searcher.lucene-metadata.Index=metadata
MCR.Searcher.lucene-metadata.IndexDir=%MIL.BaseDir%lucene-index4metadata

# Format of dates within Document, see MCRMODSDateHelper for valid formats
MIL.MODS.DateFormat=w3cdtf-10

# MyCoRe ACL configuration
MCR.Access.Strategy.Class=org.mycore.access.strategies.MCRObjectTypeStrategy

######################################################################
#                                                                    #
#        JDBC Parameters for connecting to Relational Database       #
#                                                                    #
######################################################################

# local.property: JDBC driver and database URL for MySQL connections
MCR.Persistence.SQL.Database.Type=mysql
MCR.Persistence.SQL.Driver=org.gjt.mm.mysql.Driver
MCR.Persistence.SQL.Database.URL=jdbc:mysql://localhost/ubo
MCR.Persistence.SQL.Database.Userid=ubo
MCR.Persistence.SQL.Database.Passwd=ubo

# local.property: Initial and maximum number of JDBC connections 
MCR.Persistence.SQL.Connections.Init=8
MCR.Persistence.SQL.Connections.Max=8

# After many usages of SQL connection, destroy and recreate connection:
MCR.Persistence.SQL.Database.Connections.MaxUsages=500

######################################################################
#                                                                    #
#                     Search Index Configuration                     #
#                                                                    #
######################################################################

# Do not delay indexing in MCRLuceneSearcher
MCR.Lucene.closeModifierEarly=true

# By default all diacritic characters are normalized to their base letter.
# We need additional rules for Umlaut normalization.
MCR.Metadata.Normalize.AddRule=ue>u oe>o ae>a ï¿½>s ss>s

######################################################################
#                                                                    #
#                   Other configuration properties                   #
#                                                                    #
######################################################################

# If set to true, editing metadata and content over the web is disabled
MIL.System.ReadOnly=false

# Show a maintainance message if MIL.System.ReadOnly=true
MIL.System.ReadOnly.Message=Aufgrund von Wartungsarbeiten ist das Erstellen oder Bearbeiten von Inhalten zurzeit gesperrt.

# Set the condition for reading date values.  
MCR.Metadata.SimpleDateFormat.StrictParsing=false

# IP address of trusted proxy
MCR.Request.TrustedProxies=132.252.181.145,132.252.180.145

# Classification that contains all languages with codes and labels
MCR.LanguageClassification=rfc4646

# Disable setting current groups in MyCoRe LayoutService
MCR.Users.SetCurrentGroups=true

# User and group ID of guest user in MyCoRe system
MCR.Users.Guestuser.UserName=gast
MCR.Users.Guestuser.GroupName=gast

# MyCoRe command line interface configuration
MCR.CommandLineInterface.SystemName=UBO
  
# Switch to true to enable XML Schema validation in parser 
MCR.XMLParser.ValidateSchema=false

# Caching Resolver
MCR.URIResolver.ModuleResolver.cache=unidue.ubo.CachingResolver
MIL.CachingResolver.Capacity=100
MIL.CachingResolver.MaxAge=86400000

# Sorting rules for MCRURIResolver
MCR.URIResolver.Classification.Sort.ORIGIN=false
MCR.URIResolver.Classification.Sort.TYPE=false
MCR.URIResolver.Classification.Sort.FORMAT=false
MCR.URIResolver.Classification.Sort.rfc4646=true
MCR.URIResolver.Classification.Sort.marcrelator=false

# XML document types that contain editor framework forms
MCR.EditorFramework.DocTypes=webpage

# Used in automatic mapping of titles to MODS, to identify non-sort prefixes
MIL.Title.NonSorts=der die das the

# Animated Ajax "Loading..." image
MCR.Ajax.LoadingImage=i/ajax-loader.gif

######################################################################
#                                                                    #
#                           Sending EMails                           #
#                                                                    #
######################################################################

# Default "from" address
MCR.Mail.Address=duepublico@ub.uni-due.de

# CHANGE: Hostname of the outgoing SMTP mail server
MCR.Mail.Server=mailout.uni-due.de
MCR.Mail.Protocol=smtp
MCR.Mail.Debug=false

# If you set this to 0, no email is sended anywhere
MCR.Mail.NumTries=10

######################################################################
#                                                                    #
#                           Uploading files                          #
#                                                                    #
######################################################################

# local.property: Directory for temporary storage of uploaded files
MCR.Editor.FileUpload.TempStoragePath=%MIL.BaseDir%uploads

# Maximum file size for HTML form based uploads, here 25 MB
MCR.Editor.FileUpload.MaxSize=26214400

# Files smaller than this number of bytes will be kept in memory
MCR.Editor.FileUpload.MemoryThreshold=500000

######################################################################
#                                                                    #
#             OAI-PMH 2.0 Data Provider Configuration                #
#                                                                    #
######################################################################

MCR.OAIDataProvider.MetadataFormat.oai_dc.Schema=http://www.openarchives.org/OAI/2.0/oai_dc.xsd
MCR.OAIDataProvider.MetadataFormat.oai_dc.Namespace=http://www.openarchives.org/OAI/2.0/oai_dc/

MCR.OAIDataProvider.MetadataFormat.primo.Namespace=http\://duepublico.uni-due.de/primo
MCR.OAIDataProvider.MetadataFormat.primo.Schema=http\://duepublico.uni-due.de/primo/primo.xsd

MCR.OAIDataProvider.ResumptionTokens.PartitionSize=100
MCR.OAIDataProvider.ResumptionTokens.MaxAge=1440

######################################################################
#                                                                    #
#                       Google Sitemap Configuration                 #
#                                                                    #
######################################################################

MCR.WebApplication.basedir=%MCR.datadir%
MCR.GoogleSitemap.Types=mods

######################################################################
#                                                                    #
#                       Connection to HIS LSF                        #
#                                                                    #
######################################################################

LSF.PID.Link=https://www.uni-due.de/zim/services/suchdienste/mitarbeiter.php?id=

######################################################################
#                                                                    #
#                 Universitätsbibliographie online                   #
#                                                                    #
######################################################################

# Define a store for the entries
MCR.IFS2.Store.ubo.Class=org.mycore.datamodel.ifs2.MCRMetadataStore
# local.property: base directory for dozbib data
MCR.IFS2.Store.ubo.BaseDir=%MIL.BaseDir%ubo-data
MCR.IFS2.Store.ubo.SlotLayout=4-2-2

# Default search field
MIL.UBO.DefaultSearchField=ubo_all

# MyCoRe command line interface configuration
MCR.CLI.Classes.Internal.DozBib=unidue.ubo.DozBibCommands,unidue.ubo.dedup.DeDupCommands,unidue.ubo.importer.scopus.ScopusFeedImporter

# Make entries searchable with lucene
MCR.Searcher.LuceneUBO.Index=ubo
MCR.Searcher.LuceneUBO.Class=org.mycore.backend.lucene.MCRLuceneSearcher
MCR.Searcher.LuceneUBO.IndexDir=%MIL.BaseDir%ubo-index

# URI resolver
MCR.URIResolver.ModuleResolver.ubo=unidue.ubo.DozBibResolver
MCR.URIResolver.ModuleResolver.nameLister=unidue.ubo.basket.BasketNameLister
MCR.URIResolver.ModuleResolver.mcrql=org.mycore.common.xml.MCRQueryResolver
MCR.URIResolver.ModuleResolver.evaluna=unidue.ubo.importer.evaluna.EvalunaResolver

# LSF
MCR.URIResolver.ModuleResolver.lsf=unidue.ubo.lsf.LSFResolver
MIL.LSFClient.Cache.MaxAge=3600000
MIL.LSFClient.Cache.Capacity=1000

######################################################################
#                                                                    #
#                                Export                              #
#                                                                    #
######################################################################

# Export bibliography entries in native, raw XML format.
MCR.ContentTransformer.xml.Class=org.mycore.common.content.transformer.MCRXSLTransformer
MCR.ContentTransformer.xml.Stylesheet=xsl/exportCollection-resolveBasketEntry.xsl,xsl/bibentries-legacy.xsl
MCR.ContentTransformer.xml.MIMEType=text/xml
MCR.ContentTransformer.xml.FileExtension=xml

# Export bibliography entries as HTML, using bibentries-html.xsl
MCR.ContentTransformer.html.Class=org.mycore.common.content.transformer.MCRXSLTransformer
MCR.ContentTransformer.html.Stylesheet=xsl/exportCollection-resolveBasketEntry.xsl,xsl/bibentries-html.xsl
MCR.ContentTransformer.html.MIMEType=text/html
MCR.ContentTransformer.html.FileExtension=html

# Export bibliography entries as PDF, using bibentries-pdf.xsl
# First produce XSL-FO, then make PDF out of it
MCR.ContentTransformer.fo.Class=org.mycore.common.content.transformer.MCRXSLTransformer
MCR.ContentTransformer.fo.Stylesheet=xsl/exportCollection-resolveBasketEntry.xsl,xsl/bibentries-pdf.xsl
MCR.ContentTransformer.fo2pdf.Class=org.mycore.common.content.transformer.MCRFopper
MCR.ContentTransformer.pdf.Class=org.mycore.common.content.transformer.MCRTransformerPipe
MCR.ContentTransformer.pdf.Steps=fo, fo2pdf
MCR.ContentTransformer.pdf.FileExtension=pdf

# Debugging of transformation steps (example)
MCR.ContentTransformer.debug.Class=org.mycore.common.content.transformer.MCRDebuggingTransformer
MCR.ContentTransformer.debug-pdf.Class=org.mycore.common.content.transformer.MCRTransformerPipe
MCR.ContentTransformer.debug-pdf.Steps=debug, fo, debug, fo2pdf, debug

# Export bibliography entries as MODS, using bibentries-mods.xsl
MCR.ContentTransformer.mods.Class=org.mycore.common.content.transformer.MCRXSLTransformer
MCR.ContentTransformer.mods.Stylesheet=xsl/exportCollection-resolveBasketEntry.xsl,xsl/bibentries-mods.xsl
MCR.ContentTransformer.mods.MIMEType=text/xml
MCR.ContentTransformer.mods.FileExtension=xml

# Export bibliography entries as MODS for BibTeX, using bibentries-mods and mods2bibmods.xsl
MCR.ContentTransformer.mods2bibmods.Class=org.mycore.common.content.transformer.MCRXSLTransformer
MCR.ContentTransformer.mods2bibmods.Stylesheet=xsl/exportCollection-resolveBasketEntry.xsl,xsl/bibentries-mods.xsl,xsl/mods2bibmods.xsl
MCR.ContentTransformer.mods2bibmods.MIMEType=text/xml
MCR.ContentTransformer.mods2bibmods.FileExtension=xml

# local.property: Export bibliography entries by use of the Bibutils commands.
# See http://www.scripps.edu/~cdputnam/software/bibutils/
MIL.UBO.BibUtils.Base=cmd.exe /c C\:\\Java\\bibutils_4.12\\

# Export bibliography entries as BibTeX file
# First produce MODS, then make BibTeX out of it
MCR.ContentTransformer.mods2bibtex.Class=org.mycore.common.content.transformer.MCRBibUtilsTransformer
# local.property: system command for xml2bib
MCR.ContentTransformer.mods2bibtex.Command=%MIL.UBO.BibUtils.Base%xml2bib.exe -b -w -o UTF8
MCR.ContentTransformer.mods2bibtex.MIMEType=text/plain; charset\="UTF-8"
MCR.ContentTransformer.mods2bibtex.FileExtension=bib
MCR.ContentTransformer.bibtex.Class=org.mycore.common.content.transformer.MCRTransformerPipe
MCR.ContentTransformer.bibtex.Steps=mods2bibmods, mods2bibtex
MCR.ContentTransformer.bibtex.FileExtension=bib

# Export bibliography entries as RIS (Reference Manager) format
# First produce MODS, then make RIS out of it
MCR.ContentTransformer.mods2ris.Class=org.mycore.common.content.transformer.MCRBibUtilsTransformer
# local.property: system command for xml2ris
MCR.ContentTransformer.mods2ris.Command=%MIL.UBO.BibUtils.Base%xml2ris.exe
MCR.ContentTransformer.mods2ris.MIMEType=text/plain; charset\="latin1"
MCR.ContentTransformer.mods2ris.FileExtension=ris
MCR.ContentTransformer.ris.Class=org.mycore.common.content.transformer.MCRTransformerPipe
MCR.ContentTransformer.ris.Steps=mods2bibmods, mods2ris
MCR.ContentTransformer.ris.FileExtension=ris

# Export bibliography entries as EndNote tagged file format
# First produce MODS, then make EndNote out of it
MCR.ContentTransformer.mods2endnote.Class=org.mycore.common.content.transformer.MCRBibUtilsTransformer
# local.property: system command for xml2end
MCR.ContentTransformer.mods2endnote.Command=%MIL.UBO.BibUtils.Base%xml2end.exe
MCR.ContentTransformer.mods2endnote.MIMEType=text/plain; charset\="latin1"
MCR.ContentTransformer.mods2endnote.FileExtension=enw
MCR.ContentTransformer.endnote.Class=org.mycore.common.content.transformer.MCRTransformerPipe
MCR.ContentTransformer.endnote.Steps=mods2bibmods, mods2endnote
MCR.ContentTransformer.endnote.FileExtension=enw

######################################################################
#                                                                    #
#                              Import                                #
#                                                                    #
######################################################################

# Import bibliography entries from BibTeX
MCR.ContentTransformer.import.BibTeX.Class=org.mycore.common.content.transformer.MCRTransformerPipe
MCR.ContentTransformer.import.BibTeX.Steps=import.BibTeX2MODS,import.MODS2BibEntry
MCR.ContentTransformer.import.BibTeX2MODS.Class=unidue.ubo.importer.bibtex.BibTeX2MODSTransformer
MCR.ContentTransformer.import.MODS2BibEntry.Class=org.mycore.common.content.transformer.MCRXSLTransformer
MCR.ContentTransformer.import.MODS2BibEntry.Stylesheet=xsl/import-mods2bibentry.xsl

# Import bibliography entries from Evaluna
MCR.ContentTransformer.import.Evaluna.Class=org.mycore.common.content.transformer.MCRXSLTransformer
MCR.ContentTransformer.import.Evaluna.Stylesheet=xsl/evaluna2mods.xsl,xsl/import-mods2bibentry.xsl

######################################################################
#                                                                    #
#                                OAI                                 #
#                                                                    #
######################################################################

# OAI-PMH Data Provider for harvesting by Primo
MCR.OAIDataProvider.UBO2Primo.RepositoryName=DuEPublico\: Universit\u00e4tsbibliographie f\u00fcr Primo
MCR.OAIDataProvider.UBO2Primo.RepositoryIdentifier=ubo
MCR.OAIDataProvider.UBO2Primo.AdminEmail=duepublico@ub.uni-due.de
MCR.OAIDataProvider.UBO2Primo.RecordSampleID=1234

MCR.OAIDataProvider.UBO2Primo.DeletedRecord=transient
MCR.OAIDataProvider.UBO2Primo.ResponseStylesheet=oai/oai2.xsl

MCR.OAIDataProvider.UBO2Primo.Adapter=unidue.ubo.oai.OAIAdapter
MCR.OAIDataProvider.UBO2Primo.OAIObjectManager.class=unidue.ubo.oai.OAIObjectManager
MCR.OAIDataProvider.UBO2Primo.Adapter.RecordURIPattern=xslStyle\:bibentry2{format}\:ubo\:{id}
MCR.OAIDataProvider.UBO2Primo.Adapter.HeaderURIPattern=xslStyle\:bibentry2header\:ubo\:{id}

MCR.OAIDataProvider.UBO2Primo.Searcher=org.mycore.oai.MCROAILuceneSearcher
MCR.OAIDataProvider.UBO2Primo.SetManager=org.mycore.oai.MCRSearcherOAISetManager

MCR.OAIDataProvider.UBO2Primo.Search.FromUntil=ubo_datemodified
MCR.OAIDataProvider.UBO2Primo.Search.SortBy=ubo_datemodified descending, ubo_id descending
MCR.OAIDataProvider.UBO2Primo.Search.Restriction=ubo_status \= confirmed

MCR.OAIDataProvider.UBO2Primo.EarliestDatestamp.SortBy=ubo_datemodified ascending

MCR.OAIDataProvider.UBO2Primo.MetadataFormats=oai_dc,oai_qdc,mods 

MCR.OAIDataProvider.MetadataFormat.oai_qdc.Namespace=http://epubs.cclrc.ac.uk/xmlns/qdc/
MCR.OAIDataProvider.MetadataFormat.oai_qdc.Schema=http://epubs.cclrc.ac.uk/xsd/qdc.xsd
 	
MCR.OAIDataProvider.MetadataFormat.mods.Namespace=http://www.loc.gov/mods/v3
MCR.OAIDataProvider.MetadataFormat.mods.Schema=http://www.loc.gov/standards/mods/v3/mods-3-6.xsd
 	
####################  EVALuna Biblio Schnittstelle ####################

MIL.UBO.Evaluna.URL=http\://e-med.biblio.evaluna.net/perl-bin/biblio.pl

#################### PubMed API #####################

MIL.PubMed.Link=http://www.ncbi.nlm.nih.gov/pubmed/
MIL.PubMed.REST.URL=http://www.ebi.ac.uk/europepmc/webservices/rest/search/resulttype=core&query=

#################### Scopus API #####################

MIL.Scopus.RSSFeedURL=https://syndic8.scopus.com/getMessage?registrationId=BHFEBIFFIJFNFHHHDHGKBNHMBKIGBNIFKKMFDIMJFW
MIL.Scopus.Author.Link=http://www.scopus.com/authid/detail.url?partnerID=HzOxMe3b&origin=inward&authorId=
MIL.Scopus.Link=http://www.scopus.com/inward/record.url?partnerID=HzOxMe3b&origin=inward&scp=
MIL.Scopus.API.URL=http://api.elsevier.com/content/
# MIL.Scopus.API.Key= --> see local.properties

#################### Web of Science #####################

MIL.WebOfScience.Link=http://ws.isiknowledge.com/cps/openurl/service?url_ver=Z39.88-2004&rft_id=info:ut/

######################################################################
#                                                                    #
#                          MODS Merging                              #
#                                                                    #
######################################################################

MIL.UBO.MODSMerger.titleInfo=unidue.ubo.merger.TitleInfoMerger
MIL.UBO.MODSMerger.name=unidue.ubo.merger.NameMerger
MIL.UBO.MODSMerger.namePart=unidue.ubo.merger.UniqueTypeMerger
MIL.UBO.MODSMerger.displayForm=unidue.ubo.merger.UniqueMerger
MIL.UBO.MODSMerger.originInfo=unidue.ubo.merger.UniqueMerger
MIL.UBO.MODSMerger.edition=unidue.ubo.merger.UniqueMerger
MIL.UBO.MODSMerger.place=unidue.ubo.merger.UniqueMerger
MIL.UBO.MODSMerger.publisher=unidue.ubo.merger.UniqueMerger
MIL.UBO.MODSMerger.dateIssued=unidue.ubo.merger.UniqueMerger
MIL.UBO.MODSMerger.dateModified=unidue.ubo.merger.UniqueMerger
MIL.UBO.MODSMerger.dateCreated=unidue.ubo.merger.UniqueMerger
MIL.UBO.MODSMerger.dateOther=unidue.ubo.merger.UniqueTypeMerger
MIL.UBO.MODSMerger.issuance=unidue.ubo.merger.UniqueMerger
MIL.UBO.MODSMerger.frequency=unidue.ubo.merger.UniqueMerger
MIL.UBO.MODSMerger.location=unidue.ubo.merger.UniqueMerger
MIL.UBO.MODSMerger.physicalDescription=unidue.ubo.merger.UniqueMerger
MIL.UBO.MODSMerger.part=unidue.ubo.merger.UniqueMerger
MIL.UBO.MODSMerger.detail=unidue.ubo.merger.UniqueTypeMerger
MIL.UBO.MODSMerger.extent=unidue.ubo.merger.ExtentMerger
MIL.UBO.MODSMerger.identifier=unidue.ubo.merger.IdentifierMerger
MIL.UBO.MODSMerger.abstract=unidue.ubo.merger.AbstractMerger
MIL.UBO.MODSMerger.relatedItem=unidue.ubo.merger.RelatedItemMerger
MIL.UBO.MODSMerger.default=unidue.ubo.merger.Merger
